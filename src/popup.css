/* ==========================================
   ARBITRAGE AR - SISTEMA DE DISEÑO v6.0.0
   Revisión Estética Completa - Dic 2025
   ========================================== */

/* ===========================================
   🎯 SISTEMA DE ICONOS SVG (Fase 2)
   =========================================== */

/* Base de iconos */
.icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--space-5);
  height: var(--space-5);
  color: currentColor;
  flex-shrink: 0;
}

.icon svg {
  width: 100%;
  height: 100%;
  stroke-width: var(--icon-stroke, 2px);
  stroke-linecap: round;
  stroke-linejoin: round;
  fill: none;
}

/* Tamaños de iconos */
.icon-sm {
  width: var(--space-4);
  height: var(--space-4);
}

.icon-lg {
  width: var(--space-6);
  height: var(--space-6);
}

.icon-xl {
  width: var(--space-8);
  height: var(--space-8);
}
.icon-pulse {
  animation: pulse 2s ease-in-out infinite;
}

/* ===========================================
   💬 SISTEMA DE TOOLTIPS (Fase 3)
   =========================================== */

/* Contenedor del tooltip */
.tooltip-container {
  position: fixed;
  z-index: var(--z-tooltip);
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  max-width: 280px;
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-lg);
  opacity: 0;
  pointer-events: none;
  transform: scale(0.95);
  transition:
    opacity var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-out);
}

/* Tooltip visible */
.tooltip-container.tooltip-visible {
  opacity: 1;
  pointer-events: auto;
  transform: scale(1);
  animation: tooltipFadeIn var(--duration-normal) var(--ease-out);
}
/* Flecha indicadora */
.tooltip-arrow {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border-default);
  z-index: 0;
}
.tooltip-container.tooltip-right .tooltip-arrow {
  left: -5px;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  border-top: none;
  border-right: none;
}
.tooltip-container.tooltip-left .tooltip-arrow {
  right: -5px;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  border-bottom: none;
  border-left: none;
}

/* Animación de entrada para tooltip */
@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Animación de salida para tooltip */
@keyframes tooltipFadeOut {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
}

/* ===========================================
   🎨 SISTEMA DE DISEÑO - EXTENSIONES
   Variables específicas de popup que extienden design-system.css
   =========================================== */
:root {
  /* === COLORES HEREDADOS (compatibilidad legacy) === */
  /* NOTA: Los colores base están en design-system.css */
  /* Estas variables son aliases para compatibilidad con código existente */

  /* Aliases de marca */
  --primary-blue: var(--color-brand-primary);
  --primary-blue-dark: #1f6feb;
  --primary-blue-light: var(--color-brand-secondary);
  --accent-cyan: #56d4dd;
  --accent-purple: var(--color-brand-accent);

  /* Aliases semánticos para trading */
  --profit-green: var(--color-success);
  --profit-green-dark: #238636;
  --profit-green-light: #56d364;
  --profit-green-glow: rgba(16, 185, 129, 0.4);
  --loss-red: var(--color-danger);
  --loss-red-dark: #da3633;
  --loss-red-glow: rgba(239, 68, 68, 0.4);

  /* Aliases cortos */
  --success: var(--color-success);
  --warning: var(--color-warning);
  --error: var(--color-danger);
  --info: var(--color-info);

  /* === ALIASES DE TEXTO (compatibilidad) === */
  --text-primary: var(--color-text-primary);
  --text-secondary: var(--color-text-secondary);
  --text-muted: var(--color-text-muted);
  --text-dim: #484f58;

  /* === BORDES (Compatibilidad con nombres anteriores) === */
  --border-radius-sm: var(--radius-sm);
  --border-radius-md: var(--radius-md);
  --border-radius-lg: var(--radius-lg);
  --border-radius-xl: var(--radius-xl);
  --border-radius: var(--radius-md);

  /* === SOMBRAS ESPECÍFICAS DE TRADING === */
  --shadow-glow-green: var(--shadow-glow-success);
  --shadow-glow-red: var(--shadow-glow-danger);

  /* === VARIABLES ESPECÍFICAS DEL POPUP === */
  --border-card: 1px solid var(--color-border-default);
  --border-card-hover: 1px solid var(--color-brand-primary);
  --transition-fast: all var(--duration-fast) var(--ease-default);
  --hover-lift: translateY(-2px);

  /* === GRADIENTES DE TRADING === */
  --gradient-primary: linear-gradient(135deg, #1f6feb 0%, var(--color-brand-primary) 100%);
  --gradient-primary-hover: linear-gradient(
    135deg,
    var(--color-brand-primary) 0%,
    var(--color-brand-secondary) 100%
  );
  --gradient-success: linear-gradient(135deg, #059669 0%, var(--color-success) 100%);
  --gradient-success-hover: linear-gradient(135deg, var(--color-success) 0%, #34d399 100%);
  --gradient-warning: linear-gradient(135deg, #d97706 0%, var(--color-warning) 100%);
  --gradient-error: linear-gradient(135deg, #dc2626 0%, var(--color-danger) 100%);
  --gradient-info: linear-gradient(135deg, #0891b2 0%, var(--color-info) 100%);
  --gradient-info-hover: linear-gradient(135deg, var(--color-info) 0%, #22d3ee 100%);
  --gradient-neutral: linear-gradient(135deg, var(--color-text-muted) 0%, #484f58 100%);
  --gradient-profit: linear-gradient(180deg, var(--color-success) 0%, #059669 100%);
  --gradient-profit-high: linear-gradient(180deg, #34d399 0%, var(--color-success) 100%);
  --gradient-loss: linear-gradient(180deg, var(--color-danger) 0%, #dc2626 100%);
}

/* ============================================
   ACCESIBILIDAD GLOBAL v6.0.0
   Focus states consistentes para todos los elementos
   ============================================ */

/* Focus visible para navegación por teclado */
:focus {
  outline: none;
}

/* Focus visible mejorado con transición suave (Fase 1) */
:focus-visible {
  outline: 2px solid var(--color-brand-primary);
  outline-offset: 2px;
  transition: outline-color var(--duration-fast) var(--ease-out);
}

/* Focus para botones */
button:focus-visible,
.btn:focus-visible,
.btn-settings:focus-visible,
.btn-refresh:focus-visible,
.route-card:focus-visible,
.crypto-route-card:focus-visible {
  outline: 2px solid var(--color-brand-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(88, 166, 255, 0.2);
}

/* Focus para tabs */
.tab:focus-visible,
.banks-tab-btn:focus-visible {
  outline: 2px solid var(--color-brand-primary);
  outline-offset: -2px;
  box-shadow: inset 0 0 0 2px rgba(88, 166, 255, 0.3);
}

/* Focus para inputs */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
}

/* Focus para links */
a:focus-visible {
  outline: 2px solid var(--color-brand-primary);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Reducir movimiento para usuarios que lo prefieren */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   BOTONES BASE - Estilos fundamentales que faltaban
   ============================================ */

/* Botón genérico */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-4);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  user-select: none;
}

.btn:hover:not(:disabled) {
  background: var(--color-bg-elevated);
  border-color: var(--color-border-emphasis);
}

.btn:active:not(:disabled) {
  transform: translateY(1px);
}

/* Botón primario */
.btn-primary {
  background: var(--gradient-primary);
  border-color: transparent;
  color: var(--color-text-inverse);
  font-weight: var(--font-weight-semibold);
}

/* Botón secundario */
.btn-secondary {
  background: transparent;
  border-color: var(--color-border-default);
  color: var(--color-text-primary);
}

/* Botón ghost (sin borde) */
.btn-ghost {
  background: transparent;
  border-color: transparent;
  color: var(--color-text-secondary);
}

/* .btn-sm se mantiene en design-system.css */

/* ============================================
   BOTONES DEL HEADER - Compactos (v8.0)
   ============================================ */

.btn-header-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: 1px solid var(--color-border-default);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  color: var(--color-text-muted);
}

.btn-header-icon svg {
  width: 16px;
  height: 16px;
  stroke-width: 2px;
}

.btn-header-icon:hover {
  background: var(--color-bg-elevated);
  border-color: var(--color-border-emphasis);
  color: var(--color-text-primary);
}

/* Aliases de compatibilidad */
.btn-settings,
.btn-refresh {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: 1px solid var(--color-border-default);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.btn-settings:hover,
.btn-refresh:hover {
  background: var(--color-bg-elevated);
  border-color: var(--color-border-hover);
}

.btn-settings .icon,
.btn-refresh .icon {
  color: var(--color-text-secondary);
}

.btn-settings:hover .icon,
.btn-refresh:hover .icon {
  color: var(--color-text-primary);
}

/* ============================================
   BOTONES DE FILTRO (Fase 4)
   ============================================ */

.filter-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);
  min-width: 60px;
  padding: var(--space-2);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: var(--font-size-xs);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  user-select: none;
}

.filter-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-border-hover);
}

/* Variantes de icon/count removidas durante limpieza */

.filter-btn.active {
  background: rgba(59, 130, 246, 0.2);
  border-color: var(--color-brand-primary);
}

/* ==========================================
   🎬 ANIMACIONES ESPECÍFICAS DEL POPUP
   Las animaciones base están en animations-minimal.css
   ========================================== */

/* Tab Enter - Transición de pestañas */
@keyframes tabEnter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ==========================================
   ESTILOS FUNCIONALES - Focus y Loading
   ========================================== */

/* Focus Ring - Anillo de focus para accesibilidad */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-brand-primary, #3b82f6);
}

/* Los estilos de skeleton y loading están en loading-states.css */

/* ==========================================
   ESTILOS DE LOADING SIMPLIFICADOS
   ========================================== */

/* Loading dots usando animación pulse del sistema */
.loading-dots span {
  width: 8px;
  height: 8px;
  background: var(--color-brand-primary);
  border-radius: 50%;
  animation: pulse 1.4s ease-in-out infinite;
}
.loading-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

/* ESTILOS PARA PESTAÑAS DE BANCOS - .banks-tabs usado */
.banks-tabs {
  display: flex;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
  padding: var(--space-3);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
  border-bottom: 1px solid var(--color-border-muted);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.banks-tab-btn {
  flex: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  white-space: nowrap;
}

.banks-tab-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-border-emphasis);
  color: var(--color-text-primary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.banks-tab-btn.active {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  border-color: #3b82f6;
  color: var(--color-text-inverse);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.35);
}

.banks-tab-btn.active:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.45);
}

/* CLASES BASE UNIFICADAS */
.input-base {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: var(--input-radius);
  padding: var(--input-padding);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  transition: var(--input-transition);
}

.input-base:focus {
  outline: none;
  border-color: var(--input-border-focus);
  box-shadow: var(--input-shadow-focus);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  width: 430px;
  min-width: 430px;
  height: 600px;
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  margin: 0;
  padding: 0;
  overflow: hidden;
  /* Bordes redondeados para aspecto móvil */
  border-radius: var(--radius-xl);
  /* Antialiasing para texto más nítido */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  /* Feature settings de Inter */
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
}

.container {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: var(--color-bg-primary);
  overflow: hidden;
  /* Heredar bordes redondeados */
  border-radius: var(--radius-xl);
}

/* ============================================
   HEADER - Diseño Horizontal Full-Width (v8.0)
   ============================================ */
header {
  background: var(--color-bg-secondary);
  padding: var(--space-2) var(--space-4);
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  gap: var(--space-1) var(--space-3);
  border-bottom: 1px solid var(--color-border-default);
  align-items: center;
}

.header-content {
  grid-column: 1;
  grid-row: 1;
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.header-content h1 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  letter-spacing: var(--tracking-tight);
  margin: 0;
  color: var(--color-text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.logo-icon {
  color: var(--color-brand-primary);
  width: 20px;
  height: 20px;
}

.subtitle {
  font-size: var(--font-size-xs);
  margin: 0;
  color: var(--color-text-muted);
  font-weight: var(--font-weight-normal);
  padding-left: var(--space-3);
  border-left: 1px solid var(--color-border-default);
}

.data-status {
  display: none;
}

.header-buttons {
  grid-column: 2;
  grid-row: 1;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.version-indicator {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  background: var(--color-bg-tertiary);
  color: var(--color-text-muted);
  padding: var(--space-0-5) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: 10px;
  font-weight: var(--font-weight-medium);
  border: 1px solid var(--color-border-default);
  font-family: var(--font-mono);
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.version-indicator:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-border-strong);
}

.version-indicator .version-text {
  line-height: 1;
}

/* Badge de actualización disponible */
.update-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-success);
  color: var(--color-text-inverse);
  border-radius: 50%;
  width: 16px;
  height: 16px;
  animation: pulse-update 2s ease-in-out infinite;
}

.update-badge svg {
  width: 10px;
  height: 10px;
}

@keyframes pulse-update {
  0%,
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
  }
  50% {
    transform: scale(1.1);
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0);
  }
}

/* Estado cuando hay actualización disponible */
.version-indicator.has-update {
  border-color: var(--color-success);
  background: rgba(16, 185, 129, 0.1);
}

.version-indicator.has-update:hover {
  background: rgba(16, 185, 129, 0.15);
  border-color: var(--color-success);
}

/* Tooltip personalizado para actualización */
.version-indicator[data-update-tooltip]::after {
  content: attr(data-update-tooltip);
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  font-size: 11px;
  font-family: var(--font-sans);
  white-space: nowrap;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--color-border-default);
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease;
  z-index: 1000;
  pointer-events: none;
}

.version-indicator[data-update-tooltip]::before {
  content: '';
  position: absolute;
  bottom: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: var(--color-bg-elevated);
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease;
  z-index: 1001;
}

.version-indicator[data-update-tooltip]:hover::after,
.version-indicator[data-update-tooltip]:hover::before {
  opacity: 1;
  visibility: visible;
}

/* .refresh-icon - NO USADO, ELIMINADO */

/* ============================================
   PRECIO DEL DÓLAR - Diseño Mejorado v8.1
   ============================================ */
.dollar-info {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(59, 130, 246, 0.05) 100%);
  border: 1px solid rgba(16, 185, 129, 0.2);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  margin: var(--space-2) var(--space-3);
}

.dollar-info-content {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.dollar-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  margin-left: auto;
}

.dollar-action-btn {
  border: 1px solid var(--color-success);
  background: rgba(16, 185, 129, 0.12);
  color: var(--color-success);
  border-radius: var(--radius-md);
  width: 28px;
  height: 28px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.dollar-action-btn svg {
  width: 14px;
  height: 14px;
}

.dollar-action-btn:hover {
  background: rgba(16, 185, 129, 0.2);
}

.dollar-action-btn.secondary {
  border-color: var(--color-border-default);
  color: var(--color-text-secondary);
  background: var(--color-bg-tertiary);
}

.dollar-action-btn.secondary:hover {
  background: var(--color-bg-elevated);
}

.dollar-price {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  flex: 1;
}

.dollar-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--color-success) 0%, #059669 100%);
  border-radius: var(--radius-md);
  color: var(--color-text-inverse);
  flex-shrink: 0;
}

.dollar-icon svg {
  width: 20px;
  height: 20px;
}

.dollar-details {
  display: flex;
  flex-direction: row;
  align-items: baseline;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.dollar-value {
  font-size: 24px;
  font-weight: var(--font-weight-bold);
  color: var(--color-success);
  font-family: var(--font-mono);
  letter-spacing: -0.5px;
  line-height: 1;
}

.dollar-source {
  font-size: 11px;
  color: var(--color-text-muted);
  background: var(--color-bg-tertiary);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
}

/* ============================================
   PESTAÑAS - Diseño Compacto Horizontal (v8.0)
   ============================================ */
.tabs {
  display: flex;
  background: var(--color-bg-secondary);
  padding: var(--space-1);
  margin: 0;
  gap: var(--space-1);
  border-bottom: 1px solid var(--color-border-default);
}

.tab {
  flex: 1;
  padding: var(--space-2) var(--space-2);
  border: none;
  background: transparent;
  color: var(--color-text-muted);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-1-5);
  white-space: nowrap;
}

.tab svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  stroke-width: 2px;
}

.tab:hover {
  background: var(--color-hover-overlay);
  color: var(--color-text-primary);
}

.tab.active {
  background: var(--color-brand-primary);
  color: var(--color-text-inverse);
}

/* ============================================
   ÁREA PRINCIPAL - Optimizada (v8.0)
   ============================================ */
main {
  flex: 1;
  overflow-y: auto;
  background: var(--color-bg-primary);
  padding: var(--space-3);
}

.tab-content {
  display: none;
  opacity: 0;
  animation: tabFadeIn var(--duration-fast) var(--ease-out) forwards;
}

.tab-content.active {
  display: block;
  opacity: 1;
}

@keyframes tabFadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

main::-webkit-scrollbar {
  width: 4px;
}

main::-webkit-scrollbar-track {
  background: transparent;
}

main::-webkit-scrollbar-thumb {
  background: var(--color-border-default);
  border-radius: 3px;
}

main::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-emphasis);
}

/* ============================================
   MODAL DE ACTUALIZACIÓN
   ============================================ */

/* Dialog nativo */
.update-modal-dialog {
  border: none;
  padding: 0;
  background: transparent;
  max-width: 500px;
  width: 90%;
}

.update-modal-dialog::backdrop {
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

/* Contenedor del modal */
.update-modal {
  background: var(--color-bg-elevated);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  overflow: hidden;
  animation: modalSlideIn var(--duration-normal) var(--ease-out);
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Header del modal */
.update-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-4) var(--space-5);
  background: var(--gradient-success);
  position: relative;
}

.update-type-badge {
  background: rgba(255, 255, 255, 0.25);
  color: var(--color-text-inverse);
  padding: 4px 12px;
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.btn-dismiss-update {
  background: rgba(255, 255, 255, 0.15);
  border: none;
  border-radius: var(--radius-md);
  padding: var(--space-1-5);
  cursor: pointer;
  color: var(--color-text-inverse);
  transition: all var(--duration-fast) var(--ease-out);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-dismiss-update:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: rotate(90deg);
}

/* Cuerpo del modal */
.update-modal-body {
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.update-icon-wrapper {
  display: flex;
  justify-content: center;
  margin-bottom: var(--space-4);
}

.update-modal-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-4) 0;
}

.update-versions {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
}

.current-version {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  padding: 6px 12px;
  border-radius: var(--radius-md);
  font-family: 'Courier New', monospace;
  font-size: var(--font-size-sm);
}

.new-version {
  background: var(--gradient-success);
  color: var(--color-text-inverse);
  padding: 6px 12px;
  border-radius: var(--radius-md);
  font-family: 'Courier New', monospace;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
}

.version-arrow {
  color: var(--color-success);
}

.update-description {
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
  margin: 0 0 var(--space-4) 0;
  max-width: 400px;
}

/* Features del update */
.update-features {
  width: 100%;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  text-align: left;
}

.update-features-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-2) 0;
}

.update-features-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.update-features-list li {
  padding: var(--space-1-5) 0;
  padding-left: var(--space-5);
  position: relative;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}

.update-features-list li::before {
  content: '✓';
  position: absolute;
  left: 0;
  color: var(--color-success);
  font-weight: bold;
}

/* Acciones del modal */
.update-modal-actions {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-5);
  border-top: 1px solid var(--color-border-default);
  background: var(--color-bg-secondary);
}

.btn-download {
  flex: 1;
  background: var(--gradient-success);
  color: var(--color-text-inverse);
  border: none;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
}

.btn-download:hover {
  background: var(--gradient-success-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow-success);
}

/* Variantes type-major, type-minor, type-patch - NO USADAS, ELIMINADAS */

/* ============================================
   MARKET HEALTH & DOLLAR INFO COMPACTO v5.0.66
   ============================================ */

/* INDICADOR DE SALUD DEL MERCADO - MÁS COMPACTO */
.market-health {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  margin: 0;
  border-bottom: 1px solid;
  background: rgba(30, 41, 59, 0.25);
  backdrop-filter: blur(10px);
  animation: slideDown 0.3s ease;
  font-size: 0.85em;
}
.market-status-compact {
  font-size: 0.8em;
  font-weight: 600;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* .btn-recalculate, .btn-configure - NO USADOS, ELIMINADOS */

/* ==========================================
   INDICADORES DE COLOR POR TIPO DE PROFIT
   ========================================== */

/* Indicadores de color según tipo de ruta */
.route-card.negative-profit,
.crypto-route-card.profit-negative {
  border-left-color: var(--color-danger);
}

.route-card.negative-profit:hover,
.crypto-route-card.profit-negative:hover {
  box-shadow:
    0 8px 25px -5px rgba(248, 81, 73, 0.3),
    0 0 0 1px rgba(248, 81, 73, 0.2);
  background: linear-gradient(135deg, rgba(248, 81, 73, 0.08) 0%, var(--card-bg) 100%);
}

.route-card.low-profit,
.crypto-route-card.profit-low {
  border-left-color: var(--color-warning);
}

.route-card.low-profit:hover,
.crypto-route-card.profit-low:hover {
  box-shadow:
    0 8px 25px -5px rgba(217, 119, 6, 0.3),
    0 0 0 1px rgba(217, 119, 6, 0.2);
  background: linear-gradient(135deg, rgba(217, 119, 6, 0.08) 0%, var(--card-bg) 100%);
}

.route-card.is-direct,
.route-card.high-profit,
.crypto-route-card.profit-high {
  border-left-color: var(--color-success);
}

.route-card.is-direct:hover,
.route-card.high-profit:hover,
.crypto-route-card.profit-high:hover {
  box-shadow:
    0 8px 25px -5px rgba(16, 185, 129, 0.3),
    0 0 0 1px rgba(16, 185, 129, 0.2);
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, var(--card-bg) 100%);
}

.route-card.loading::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(88, 166, 255, 0.1) 50%, transparent 100%);
  animation: loadingShimmer 1s ease-in-out infinite;
}

/* .particle y .route-card.collapsed - NO USADOS EN POPUP, ELIMINADOS */

/* ==========================================
   SISTEMA UNIFICADO DE CARDS (v8.0)
   Base común para route-card y crypto-route-card
   ========================================== */

.route-card,
.crypto-route-card,
.arbitrage-card {
  /* Estructura base */
  position: relative;
  background: var(--card-bg);
  backdrop-filter: var(--backdrop-blur);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  margin-bottom: var(--space-2);

  /* Delimitación visual */
  border: var(--card-border);
  box-shadow: var(--shadow-sm);

  /* Indicador lateral */
  border-left: 3px solid var(--color-border-default);

  /* Transiciones suaves */
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Animación de entrada */
  opacity: 0;
  transform: translateY(8px);
  animation: cardFadeIn var(--duration-fast) var(--ease-out) forwards;

  /* Cursor pointer para indicar clickeable */
  cursor: pointer;
}

/* ==========================================
   ANIMACIÓN HOVER MEJORADA - Cards Interactivas
   ========================================== */

.route-card:hover,
.crypto-route-card:hover,
.arbitrage-card:hover {
  border-color: var(--color-brand-primary);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, var(--card-bg) 100%);
  box-shadow:
    0 8px 25px -5px rgba(59, 130, 246, 0.25),
    0 0 0 1px rgba(59, 130, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  transform: translateY(-4px) scale(1.01);
}

/* Efecto de brillo en hover */
.route-card::before,
.crypto-route-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    transparent 40%,
    rgba(255, 255, 255, 0.03) 50%,
    transparent 60%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.route-card:hover::before,
.crypto-route-card:hover::before {
  opacity: 1;
}

/* Indicador "Ver detalles" en hover */
.route-card::after,
.crypto-route-card::after {
  content: 'Click para ver detalles →';
  position: absolute;
  bottom: 8px;
  right: 12px;
  font-size: 10px;
  color: var(--color-brand-primary);
  opacity: 0;
  transform: translateX(10px);
  transition: all 0.25s ease;
  pointer-events: none;
  font-weight: 500;
}

.route-card:hover::after,
.crypto-route-card:hover::after {
  opacity: 0.9;
  transform: translateX(0);
}

/* Efecto activo al hacer click */
.route-card:active,
.crypto-route-card:active {
  transform: translateY(-2px) scale(0.99);
  box-shadow:
    0 4px 15px -3px rgba(59, 130, 246, 0.3),
    inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Card seleccionada */
.route-card.selected,
.crypto-route-card.selected {
  border-color: var(--color-brand-primary);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, var(--card-bg) 100%);
  box-shadow:
    0 0 0 2px rgba(59, 130, 246, 0.3),
    0 8px 20px -5px rgba(59, 130, 246, 0.2);
}

/* Layout interno horizontal */
.card-header,
.route-card .fiat-card-header,
.crypto-route-card .crypto-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.card-body,
.crypto-route-card .crypto-card-body {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  align-items: center;
}

.card-footer,
.crypto-route-card .crypto-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--space-2);
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-muted);
}

/* Estados de profit */
.route-card.profit-high,
.crypto-route-card.profit-high {
  border-left-color: var(--color-success);
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), transparent);
}

.route-card.profit-negative,
.crypto-route-card.profit-negative {
  border-left-color: var(--color-danger);
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.03), transparent);
}

@keyframes cardFadeIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ==========================================
   FIAT CARDS - Estilo unificado con Crypto v8.0
   ========================================== */

/* Header de la tarjeta fiat (IGUAL que crypto) */
.route-card .fiat-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-2);
}

.route-card .fiat-info {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.route-card .fiat-icon,
.crypto-route-card .crypto-icon {
  font-size: 1.2em; /* MISMO que crypto-icon */
}

.route-card .fiat-name {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

/* Body de la tarjeta fiat (IGUAL que crypto) */
.route-card .fiat-card-body {
  margin-bottom: var(--space-2);
}

.route-card .route-path {
  display: flex !important; /* MISMO que crypto */
  align-items: center;
  gap: 8px; /* MISMO que crypto */
  margin-bottom: 8px; /* MISMO que crypto */
  font-size: 1em; /* +10px desde 0.85em */
  color: #e6edf3; /* MISMO que crypto */
}

.route-card .route-path .arrow,
.crypto-route-card .route-path .arrow {
  color: #58a6ff; /* MISMO que crypto */
  font-size: 1.1em; /* MISMO que crypto */
}

.route-card .route-path strong {
  color: var(--color-text-primary);
}

.route-card .operation-meta {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  align-items: center;
}

.route-card .time-indicator {
  font-size: 0.9em; /* +10px desde 0.75em */
  color: var(--color-text-secondary);
}

/* Footer de la tarjeta fiat (IGUAL que crypto) */
.route-card .fiat-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-subtle);
}

.route-card .profit-details,
.crypto-route-card .profit-details {
  display: flex;
  flex-direction: column;
  gap: 2px; /* MISMO que crypto */
}

.route-card .profit-details .label {
  font-size: 0.85em; /* +10px desde 0.7em */
  color: var(--color-text-secondary);
  text-transform: uppercase;
  font-weight: 600;
}

.route-card .profit-details .value {
  font-weight: 600; /* MISMO que crypto */
  color: #3fb950; /* MISMO que crypto */
  font-size: 1em; /* +10px desde 0.85em */
}

.route-card .profit-details .value.negative {
  color: #f85149; /* MISMO que crypto */
}

/* Badges unificados */
.route-card .p2p-badge,
.route-card .no-p2p-badge {
  padding: 2px 8px;
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
}

.route-card .p2p-badge {
  background: rgba(210, 153, 34, 0.15);
  color: var(--color-warning);
}

.route-card .no-p2p-badge {
  background: rgba(63, 185, 80, 0.15);
  color: var(--color-success);
}

/* Estilos del modal fiat (reutiliza estilos crypto) */
.fiat-details-modal,
.crypto-details-modal {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.fiat-detail-header,
.crypto-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-default);
}

.fiat-detail-header.profitable,
.crypto-detail-header.profitable {
  background: linear-gradient(135deg, rgba(63, 185, 80, 0.1) 0%, var(--color-bg-tertiary) 100%);
  border-color: rgba(63, 185, 80, 0.3);
}

.fiat-detail-header.loss,
.crypto-detail-header.loss {
  background: linear-gradient(135deg, rgba(248, 81, 73, 0.1) 0%, var(--color-bg-tertiary) 100%);
  border-color: rgba(248, 81, 73, 0.3);
}

.fiat-symbol {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.fiat-symbol .symbol-name {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

/* Ruta con paso intermedio (transfer) */
.route-step.transfer {
  border: 1px solid rgba(210, 153, 34, 0.3);
}

/* Exchange badge en route-card */
.route-card .exchange-badge {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
}

/* Header antiguo de la tarjeta (mantener para compatibilidad) */
.card-header,
.route-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.route-exchange-section {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--space-1);
}
/* Badges debajo del exchange, lado izquierdo */
.route-badges {
  display: flex;
  gap: var(--space-1);
  align-items: center;
  flex-wrap: wrap;
}
.single-exchange-badge {
  background: rgba(188, 140, 255, 0.12);
  color: var(--accent-purple);
  border: 1px solid rgba(188, 140, 255, 0.25);
}
.no-p2p-badge {
  background: rgba(88, 166, 255, 0.12);
  color: var(--color-brand-primary);
  border: 1px solid rgba(88, 166, 255, 0.25);
}
@keyframes profitPulseGlow {
  0%,
  100% {
    transform: scale(1);
    box-shadow:
      0 0 0 0 rgba(63, 185, 80, 0.4),
      0 0 20px rgba(63, 185, 80, 0.2);
  }
  50% {
    transform: scale(1.05);
    box-shadow:
      0 0 0 8px rgba(63, 185, 80, 0),
      0 0 30px rgba(63, 185, 80, 0.4);
  }
}
.profit-badge.profit-positive,
.profit-badge.positive {
  background: var(--color-success-subtle);
  color: var(--color-success);
  border: 1px solid rgba(63, 185, 80, 0.3);
}

.profit-amount {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  color: var(--color-success);
}

/* Resumen de ruta en modal de detalles */
.route-summary {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  margin-top: var(--space-3);
  padding: var(--space-4);
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-default);
  border-left: 3px solid var(--color-brand-primary);
}

.route-summary .summary-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--color-border-subtle);
}

.route-summary .summary-item:last-child,
.step-item:last-child,
.breakdown-section:last-child,
.fee-row:last-child {
  border-bottom: none;
}

.route-summary .label,
.rate-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.route-summary .value,
.rate-value {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  font-family: var(--font-mono);
}

/* Route Steps - Pasos dentro de modal de detalles */
.route-steps {
  margin-top: var(--space-4);
}

.route-steps h3 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.route-steps .step {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-default);
  margin-bottom: var(--space-2);
  transition: all var(--duration-fast) var(--ease-default);
}

.route-steps .step:hover {
  border-color: var(--color-border-emphasis);
  background: var(--color-bg-tertiary);
}

.route-steps .step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  min-width: 28px;
  background: var(--gradient-info);
  color: var(--color-text-inverse);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

.route-steps .step:nth-child(1) .step-number {
  background: var(--gradient-success);
  box-shadow: 0 2px 4px rgba(63, 185, 80, 0.3);
}

.route-steps .step:nth-child(2) .step-number {
  background: var(--gradient-warning);
  box-shadow: 0 2px 4px rgba(210, 153, 34, 0.3);
}

.route-steps .step:nth-child(3) .step-number {
  background: var(--gradient-info);
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

.route-steps .step:nth-child(4) .step-number {
  background: linear-gradient(135deg, #6d28d9 0%, #8b5cf6 100%);
  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
}

.route-steps .step-content {
  flex: 1;
}

.route-steps .step-content h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-1) 0;
}

.route-steps .step-content p {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  margin: 0;
  line-height: var(--line-height-relaxed);
}

/* Fees Info - Sección de comisiones en modal */
.fees-info {
  margin-top: var(--space-4);
  padding: var(--space-4);
  background: rgba(210, 153, 34, 0.08);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(210, 153, 34, 0.2);
}

.fees-info h4 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-warning);
  margin: 0 0 var(--space-2) 0;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.fee-breakdown {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.fee-breakdown > div {
  display: flex;
  justify-content: space-between;
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.fee-breakdown .fee-total {
  margin-top: var(--space-2);
  padding-top: var(--space-2);
  border-top: 1px solid rgba(210, 153, 34, 0.2);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.card-header h3 {
  font-size: 1.15em;
  color: #e1e8ed;
  font-weight: 700;
}

.card-body {
  position: relative;
  z-index: 1;
}
.card-indicator.negative,
.route-indicator.loss {
  background: var(--color-danger);
}
.card-indicator.normal,
.route-indicator.medium {
  background: var(--color-warning);
}
/* Contenido de la card */
.card-content,
.route-content {
  flex: 1;
  padding-left: 8px;
}
.card-title h3 {
  margin: 0;
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
/* Status indicators */
.status-indicator {
  font-size: 0.85em;
  margin-left: var(--space-1);
}

/* Grid de precios */
.price-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-2);
  margin-top: var(--space-2);
}
.price-item.highlight {
  background: rgba(63, 185, 80, 0.08);
  border-color: rgba(63, 185, 80, 0.2);
}
.price-item .price-value {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}
/* Fees y metadata */
.card-fees {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--space-2);
  padding: var(--space-2);
  background: rgba(210, 153, 34, 0.08);
  border-radius: var(--radius-sm);
  border: 1px solid rgba(210, 153, 34, 0.2);
}
.card-meta {
  margin-top: var(--space-2);
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
}
/* Route card específicos */
.route-info {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
/* Detalles de ruta mejorados */
.route-details {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--space-2);
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-muted);
}
.route-amount {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}
.amount-label {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
}
.amount-value.positive {
  color: var(--color-success);
}
.route-volume {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm);
}

.route-card:focus::after {
  opacity: 0.5;
}

.fee-value {
  color: #fbbf24;
  font-weight: 800;
}

/* LOADING & MESSAGES - Estilos principales en loading-states.css */
.error-message {
  text-align: center;
  padding: 40px 20px;
  color: var(--color-text-secondary);
}

/* Animaciones auxiliares centralizadas en animations.css */

/* Contenedor de error */
.error-container {
  text-align: center;
  padding: 24px 16px;
  color: #fca5a5;
  background: rgba(248, 81, 73, 0.1);
  border-radius: 8px;
  border: 1px solid rgba(248, 81, 73, 0.3);
  margin: 12px;
}
.error-container p {
  margin: 8px 0;
  color: #f0f6fc;
  line-height: 1.5;
  font-size: 12px;
}
.retry-btn:hover {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
}
.error-container summary {
  cursor: pointer;
  font-weight: 600;
  margin-bottom: 10px;
}
/* SELECT PROMPT */
.select-prompt {
  text-align: center;
  padding: 40px 20px;
  color: var(--color-text-secondary);
  font-size: 0.95em;
  background: rgba(59, 130, 246, 0.05);
  border-radius: 12px;
  border: 1px dashed rgba(59, 130, 246, 0.3);
}

/* ============================================
   ESTILOS PARA FILAS DE BANCOS (DISEÑO SIMPLE)
   ============================================ */

.bank-row {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap: 12px;
  align-items: center;
  padding: 6px 12px;
  margin-bottom: 4px;
  background: rgba(15, 23, 42, 0.4);
  border: 1px solid rgba(59, 130, 246, 0.15);
  border-radius: 8px;
  transition: all 0.2s ease;
}
.bank-row .bank-name {
  color: #e1e8ed;
  font-size: 0.85em;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: 4px 0;
}
.bank-row .bank-sell {
  color: #fca5a5;
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.2);
}

/* ==========================================
  ESTILOS PARA CARDS DE EXCHANGES (Reducido)
  Nota: variantes legacy no usadas fueron removidas.
  ========================================== */

.broker-name {
  color: #e1e8ed;
  font-size: 0.9em;
  font-weight: 600;
  flex: 1;
}

/* Las clases .price-label y .price-value SÍ se usan: */
.price-label {
  color: var(--color-text-secondary);
  font-weight: 500;
  min-width: 50px;
}
/* Controles de bancos */
.banks-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(59, 130, 246, 0.2);
}
.btn-refresh:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
  background: var(--gradient-primary-hover);
}
.btn-refresh:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* ============================================
   FOOTER REDISEÑADO v8.0
   ============================================ */
footer {
  background: var(--color-bg-secondary);
  padding: var(--space-2) var(--space-3);
  border-top: 1px solid var(--color-border-default);
}

.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-3);
}

.footer-left {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.footer-right {
  display: flex;
  align-items: center;
}

.footer-filters {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  background: var(--color-bg-tertiary);
  padding: 6px;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-subtle);
}

.filter-btn-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 32px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.filter-btn-footer:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text-primary);
}

.filter-btn-footer.active {
  background: var(--color-brand-primary);
  color: var(--color-text-inverse);
  box-shadow: var(--shadow-sm);
}

.filter-btn-footer .icon {
  width: 14px;
  height: 14px;
}

.timestamp {
  color: var(--color-success);
  font-size: var(--font-size-xs);
  display: flex;
  align-items: center;
  gap: var(--space-1);
  font-family: var(--font-mono);
}

.footer-note {
  color: var(--color-warning);
  font-size: 10px;
  font-weight: var(--font-weight-medium);
}

/* UTILITY */
/* hidden - DEFINIDO EN design-system.css */

/* ============================================
   SIMULADOR v2.0 - Diseño limpio y compacto
   ============================================ */
.simulator-container {
  padding: var(--space-3);
}

/* Instrucciones */
.sim-instructions {
  text-align: center;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin: 0 0 var(--space-3) 0;
  line-height: 1.4;
}

/* Input row principal */
.sim-input-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-default);
}

.sim-input-row label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  white-space: nowrap;
}

.sim-input-wrapper {
  display: flex;
  align-items: center;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: border-color var(--duration-fast);
}

.sim-input-wrapper:focus-within {
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.15);
}

.sim-currency {
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  border-right: 1px solid var(--color-border-default);
}

.sim-input-wrapper input {
  width: 120px;
  padding: var(--space-2);
  border: none;
  background: transparent;
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  font-family: var(--font-mono);
  text-align: right;
}

.sim-input-wrapper input:focus {
  outline: none;
}

.sim-settings-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: transparent;
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--duration-fast);
}

.sim-settings-btn:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-brand-primary);
  border-color: var(--color-brand-primary);
}

.sim-settings-btn svg {
  width: 16px;
  height: 16px;
}

/* Configuración avanzada */
.sim-advanced {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  margin-bottom: var(--space-3);
  animation: slideDown var(--duration-normal) var(--ease-default);
}

.sim-config-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-3);
}

.sim-config-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.sim-config-title {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--space-1);
}

.sim-config-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.sim-config-row label,
.sim-config-row > span:first-child {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  min-width: 55px;
}

.sim-config-row input {
  flex: 1;
  max-width: 70px;
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-sm);
  color: var(--color-text-primary);
  font-size: var(--font-size-xs);
  font-family: var(--font-mono);
  text-align: right;
}

.sim-config-row input:focus {
  outline: none;
  border-color: var(--color-brand-primary);
}

.sim-config-actions {
  display: flex;
  justify-content: center;
  gap: var(--space-2);
  margin-top: var(--space-3);
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-muted);
}

.sim-btn-calc,
.sim-btn-reset {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: var(--radius-md);
  border: none;
  cursor: pointer;
  transition: all var(--duration-fast);
}

.sim-btn-calc svg,
.sim-btn-reset svg {
  width: 16px;
  height: 16px;
}

.sim-btn-calc {
  background: linear-gradient(135deg, #10b981, #059669);
  color: var(--color-text-inverse);
}

.sim-btn-calc:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
}

.sim-btn-reset {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border-default);
}

.sim-btn-reset:hover,
.sim-btn-filter-reset:hover {
  color: var(--color-danger);
  border-color: var(--color-danger);
}

/* Sección de matriz */
.sim-matrix-section {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  padding: var(--space-3);
}

.sim-matrix-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  flex-wrap: wrap;
  margin-bottom: var(--space-3);
}

.sim-range-group {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.sim-range-group label,
.sim-range-group > span:first-child {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.sim-range-group input {
  width: 60px;
  padding: var(--space-1);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-sm);
  color: var(--color-text-primary);
  font-size: var(--font-size-xs);
  font-family: var(--font-mono);
  text-align: center;
}

.sim-range-group input:focus {
  outline: none;
  border-color: var(--color-brand-primary);
}

.sim-range-group span {
  color: var(--color-text-muted);
  font-size: var(--font-size-xs);
}

.sim-btn-generate {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  border: none;
  border-radius: var(--radius-md);
  color: var(--color-text-inverse);
  cursor: pointer;
  transition: all var(--duration-fast);
}

.sim-btn-generate svg {
  width: 16px;
  height: 16px;
}

.sim-btn-generate:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
}

/* Filtros de matriz */
.sim-matrix-filters {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm);
  margin-bottom: var(--space-2);
}

.sim-matrix-filters label,
.sim-matrix-filters > span:first-child {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.sim-matrix-filters input {
  width: 50px;
  padding: var(--space-1);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-sm);
  color: var(--color-text-primary);
  font-size: var(--font-size-xs);
  font-family: var(--font-mono);
  text-align: center;
}

.sim-matrix-filters input:focus {
  outline: none;
  border-color: var(--color-brand-primary);
}

.sim-matrix-filters span {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
}

.sim-btn-filter,
.sim-btn-filter-reset {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  border: none;
  cursor: pointer;
  transition: all var(--duration-fast);
}

.sim-btn-filter svg,
.sim-btn-filter-reset svg {
  width: 14px;
  height: 14px;
}

.sim-btn-filter {
  background: #10b981;
  color: var(--color-text-inverse);
}

.sim-btn-filter:hover {
  background: #059669;
}

.sim-btn-filter-reset {
  background: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border-default);
}

.sim-filter-count {
  text-align: center;
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  margin-bottom: var(--space-2);
}

/* Tabla de matriz */
.sim-matrix-table-wrap {
  overflow-x: auto;
  margin-bottom: var(--space-2);
  border-radius: var(--radius-sm);
}

.sim-matrix-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-xs);
  font-family: var(--font-mono);
}

.sim-matrix-table th,
.sim-matrix-table td {
  padding: var(--space-1);
  text-align: center;
  border: 1px solid var(--color-border-muted);
  min-width: 45px;
}

.sim-matrix-table th {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  font-size: 10px;
  white-space: nowrap;
}

.sim-matrix-table td {
  background: var(--color-bg-primary);
  transition: background var(--duration-fast);
}

.sim-matrix-table td.positive {
  background: rgba(16, 185, 129, 0.2);
  color: #4ade80;
}

.sim-matrix-table td.neutral {
  background: rgba(251, 191, 36, 0.2);
  color: #fbbf24;
}

.sim-matrix-table td.negative {
  background: rgba(239, 68, 68, 0.2);
  color: #fca5a5;
}

/* Leyenda compacta */
.sim-matrix-legend {
  display: flex;
  justify-content: center;
  gap: var(--space-4);
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-muted);
}

.sim-matrix-legend span {
  font-size: var(--font-size-xs);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.legend-positive {
  color: #4ade80;
}
.legend-neutral {
  color: #fbbf24;
}
.legend-negative {
  color: #f87171;
}

/* ============================================
   FIN SIMULADOR v2.0
   ============================================ */

/* Legacy simulator styles - keeping for backward compatibility */
.simulator-header {
  text-align: center;
  padding: var(--space-4) var(--space-3);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
  border-bottom: 1px solid var(--color-border-muted);
  margin-bottom: var(--space-3);
}

.header-icon-wrapper {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
  border-radius: 50%;
  margin-bottom: var(--space-2);
}

.header-icon-wrapper .icon {
  color: var(--color-brand-primary);
  font-size: 24px;
}

.simulator-header h3 {
  color: var(--color-text-primary);
  font-size: var(--font-size-lg);
  margin-bottom: var(--space-1);
  font-weight: var(--font-weight-semibold);
}

.simulator-header p {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin: 0;
  line-height: var(--line-height-normal);
}

.simulator-input-group {
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  margin: 0 var(--space-3) var(--space-3);
  border: 1px solid var(--color-border-default);
  display: flex;
  justify-content: center;
}

.simulator-input-compact {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  max-width: 320px;
  width: 100%;
}

.simulator-input-compact label {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  white-space: nowrap;
  flex-shrink: 0;
}

.simulator-input-compact input {
  flex: 1;
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  transition: all var(--duration-fast) var(--ease-default);
  font-family: var(--font-mono);
  text-align: right;
}

.simulator-input-compact input:hover {
  border-color: var(--color-border-emphasis);
}

.simulator-input-compact input:focus {
  outline: none;
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}
.simulator-input label {
  display: block;
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--space-2);
  font-size: var(--font-size-sm);
}

.simulator-input input,
.config-input input,
.matrix-control-item input {
  width: 100%;
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  transition: all var(--duration-fast) var(--ease-default);
  font-family: var(--font-mono);
}

.simulator-input input:hover,
.config-input input:hover,
.matrix-control-item input:hover {
  border-color: var(--color-border-emphasis);
}

.simulator-input input:focus,
.config-input input:focus,
.matrix-control-item input:focus {
  outline: none;
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.simulator-advanced-toggle {
  display: flex;
  justify-content: center;
  margin: var(--space-2) 0 var(--space-3);
}

.btn-toggle-advanced,
.btn-calculate-matrix,
.btn-reset-config,
.matrix-generate-btn,
.btn-apply-filter,
.btn-reset-filter {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  min-width: 36px;
  min-height: 36px;
}

.btn-toggle-advanced:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-brand-primary);
  color: var(--color-brand-primary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-calculate-matrix,
.matrix-generate-btn,
.btn-apply-filter {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border-color: #10b981;
  color: var(--color-text-inverse);
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}

.btn-calculate-matrix:hover,
.matrix-generate-btn:hover,
.btn-apply-filter:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

.btn-reset-config,
.btn-reset-filter {
  background: var(--color-bg-secondary);
  border-color: var(--color-border-default);
  color: var(--color-text-secondary);
}

.btn-reset-config:hover,
.btn-reset-filter:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.4);
  color: var(--color-danger);
}

.advanced-config {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  margin: 0 var(--space-3) var(--space-4);
  animation: slideDown var(--duration-normal) var(--ease-default);
}

/* @keyframes slideDown - DEFINIDO EN SECCIÓN DE ANIMACIONES CONSOLIDADAS */

.config-section {
  margin-bottom: var(--space-4);
}

.config-section:last-child {
  margin-bottom: 0;
}

.config-section h4 {
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-2);
  font-weight: var(--font-weight-semibold);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.config-row {
  display: flex;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
  flex-wrap: wrap;
}

.config-input {
  flex: 1;
  min-width: 120px;
}

.config-input label,
.matrix-control-item label {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--space-1);
}

.matrix-control-item {
  flex: 1;
  min-width: 110px;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.config-actions {
  display: flex;
  gap: var(--space-2);
  justify-content: center;
  margin-top: var(--space-3);
}

/* RESPONSIVE */
@media (max-width: 500px) {
  body {
    width: 100%;
  }

  .header-content h1 {
    font-size: 1.5em;
  }

  .tab {
    font-size: 0.85em;
    padding: 10px 12px;
  }
}

/* ============================================
   GUIDE RESPONSIVE STYLES (Reducido)
   ============================================ */

#selected-arbitrage-guide {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* Nota: clases legacy de guía no usadas fueron removidas. */
.calc-value {
  color: var(--primary-blue);
  font-size: 1.1em;
  font-weight: var(--font-weight-semibold);
}
.calc-fee {
  color: #fbbf24;
  font-size: 0.75em;
  font-weight: 600;
  margin-top: 2px;
}

/* ==========================================
   FILTROS P2P / NO P2P
   ========================================== */

.filter-controls {
  background: linear-gradient(135deg, rgba(30, 58, 138, 0.2) 0%, rgba(15, 23, 42, 0.4) 100%);
  backdrop-filter: blur(20px);
  border-radius: 12px;
  padding: 8px 12px;
  /* Reducido para diseño más compacto */
  margin-bottom: 12px;
  /* Reducido para diseño más compacto */
  border: 1px solid rgba(59, 130, 246, 0.25);
  animation: slideDown 0.5s ease-out;
}

.filter-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  margin-bottom: 0;
}

.filter-buttons {
  display: flex;
  gap: 6px;
  justify-content: center;
}

/* ============================================
   ARBITRAJE CRIPTO - Estilos unificados
   ============================================ */
.crypto-selector-wrapper {
  padding: var(--space-3);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
  border-bottom: 1px solid var(--color-border-muted);
  margin-bottom: var(--space-4);
}

.crypto-selector {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  max-width: 500px;
  margin: 0 auto;
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-default);
  transition: all var(--duration-fast) var(--ease-out);
}

.crypto-selector:hover {
  border-color: var(--color-border-emphasis);
  box-shadow: var(--shadow-sm);
}

.crypto-selector .icon {
  color: var(--color-brand-primary);
  flex-shrink: 0;
}

.crypto-selector label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  white-space: nowrap;
  flex-shrink: 0;
}

.crypto-dropdown {
  flex: 1;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-default);
}

.crypto-dropdown:hover {
  border-color: var(--color-border-emphasis);
}

.crypto-dropdown:focus {
  outline: none;
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15);
}

/* Botones de filtro de operación (crypto tab) */
.filter-btn-operation {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.filter-btn-operation:hover,
.sort-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-border-emphasis);
  color: var(--color-text-primary);
}

.filter-btn-operation.active {
  background: var(--color-brand-primary);
  border-color: var(--color-brand-primary);
  color: var(--color-text-inverse);
}

.filter-btn-operation span {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}
/* ==========================================
   CONTENEDORES DE RUTAS - MEJORAS DE ESPACIADO
   ========================================== */

/* Contenedor de rutas optimizadas */
#optimized-routes {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  padding: var(--space-2);
}

/* Contenedor de rutas crypto */
#crypto-routes-container {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  max-height: 400px;
  overflow-y: auto;
  padding: var(--space-2);
}

/* Loading states */
#crypto-routes-container .loading,
#optimized-routes .loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-4);
  color: var(--color-text-muted);
}

/* Mensaje de no resultados */
#crypto-routes-container .no-results,
#optimized-routes .no-results,
.no-opportunities {
  text-align: center;
  padding: var(--space-8) var(--space-4);
  color: var(--color-text-muted);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px dashed var(--color-border-muted);
}

.no-opportunities p {
  font-size: var(--font-size-sm);
  margin: 0;
}
.route-card.is-direct {
  border-left: 3px solid var(--color-success);
}
p.error {
  background: var(--color-danger-subtle);
  color: var(--color-danger);
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(239, 68, 68, 0.3);
  text-align: center;
  font-size: var(--font-size-sm);
  line-height: 1.5;
  margin: var(--space-4);
}

/* MATRIZ DE RIESGO/RENDIMIENTO */
.risk-matrix-section {
  margin: var(--space-4) var(--space-3);
  padding: var(--space-4);
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
  border-radius: var(--radius-xl);
  border: 1px solid rgba(16, 185, 129, 0.2);
}

.risk-matrix-section h3 {
  color: var(--color-text-primary);
  margin-bottom: var(--space-1);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.risk-matrix-section h3 .icon {
  color: #10b981;
}

.risk-matrix-section > p {
  color: var(--color-text-secondary);
  margin-bottom: var(--space-3);
  font-size: var(--font-size-xs);
  line-height: var(--line-height-normal);
}

.matrix-controls {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: var(--space-2);
  margin-bottom: var(--space-3);
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-default);
}

.matrix-generate-btn {
  grid-column: span 2;
}

.matrix-table-container {
  overflow-x: auto;
  margin-bottom: var(--space-3);
  border-radius: var(--radius-lg);
  background: var(--color-bg-secondary);
  padding: var(--space-2);
  border: 1px solid var(--color-border-default);
}

.risk-matrix-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: var(--color-bg-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.risk-matrix-table th,
.risk-matrix-table td {
  padding: var(--space-2) var(--space-3);
  text-align: center;
  border-right: 1px solid var(--color-border-default);
  border-bottom: 1px solid var(--color-border-default);
  font-size: var(--font-size-xs);
  line-height: var(--line-height-tight);
}

.risk-matrix-table th {
  background: var(--color-bg-secondary);
  color: var(--color-primary);
  font-weight: var(--font-weight-bold);
  position: sticky;
  top: 0;
  z-index: 10;
  white-space: nowrap;
}

.risk-matrix-table th:first-child {
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
  font-weight: var(--font-weight-semibold);
  left: 0;
  z-index: 11;
}

.risk-matrix-table td {
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  transition: all 0.15s ease;
  cursor: pointer;
}

.risk-matrix-table td:first-child {
  background: var(--color-bg-secondary);
  color: var(--color-primary);
  font-weight: var(--font-weight-semibold);
  position: sticky;
  left: 0;
  z-index: 5;
}

.risk-matrix-table td:hover {
  background: rgba(59, 130, 246, 0.15);
  transform: scale(1.03);
  z-index: 6;
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.25);
}

.matrix-cell-positive {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(16, 185, 129, 0.2) 100%);
  color: #4ade80 !important;
}

.matrix-cell-neutral {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.3) 0%, rgba(245, 158, 11, 0.2) 100%);
  color: #fbbf24 !important;
}

.matrix-cell-negative {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.3) 0%, rgba(220, 38, 38, 0.2) 100%);
  color: #fca5a5 !important;
}
.matrix-legend {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 12px;
  background: rgba(15, 23, 42, 0.4);
  border-radius: 12px;
  border: 1px solid rgba(71, 85, 105, 0.3);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.85em;
}

.legend-color {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.legend-color.positive {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.6) 0%, rgba(16, 185, 129, 0.4) 100%);
}

.legend-color.neutral {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.6) 0%, rgba(245, 158, 11, 0.4) 100%);
}

.legend-color.negative {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.6) 0%, rgba(220, 38, 38, 0.4) 100%);
}
/* NUEVO v5.0.31: Filtros de matriz */
/* FILTROS DE MATRIZ */
.matrix-filters {
  background: var(--color-bg-secondary);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-default);
  margin-bottom: var(--space-3);
}

.matrix-filters h4 {
  margin: 0 0 var(--space-2) 0;
  font-size: var(--font-size-sm);
  color: var(--color-primary);
  font-weight: var(--font-weight-semibold);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.filter-controls-matrix {
  display: grid;
  grid-template-columns: 1fr 1fr auto auto;
  align-items: end;
  gap: var(--space-2);
}

.filter-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.filter-item label {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.filter-item input {
  padding: var(--space-2);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  transition: all 0.2s ease;
}

.filter-item input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.btn-apply-filter {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  color: var(--color-text-inverse);
  box-shadow: var(--shadow-sm);
}

.btn-apply-filter:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-reset-filter {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border-default);
}

.btn-reset-filter:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-border-hover);
}

.filter-results {
  margin-top: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: rgba(59, 130, 246, 0.1);
  border-radius: var(--radius-md);
  border: 1px solid rgba(59, 130, 246, 0.25);
  font-size: var(--font-size-xs);
  color: var(--color-primary);
  text-align: center;
  font-weight: var(--font-weight-semibold);
}

.filter-results #filter-count {
  font-size: var(--font-size-lg);
  color: var(--color-primary);
  font-weight: var(--font-weight-bold);
}
.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-brand-primary), var(--accent-cyan));
  border-radius: var(--radius-full);
  transition: width var(--duration-slow) var(--ease-out);
}
@keyframes progressIndeterminate {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(300%);
  }
  100% {
    transform: translateX(-100%);
  }
}

/* ============================================
   INDICADORES DE ESTADO Y VALIDACIÓN v5.0.74
   ============================================ */

/* Contenedor de advertencias de datos */
.data-warning-container {
  margin: 8px 12px;
  animation: slideDown 0.3s ease-out;
}
/* @keyframes pulse - DEFINIDO EN SECCIÓN DE ANIMACIONES CONSOLIDADAS */

.warning-banner.stale-data {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(220, 38, 38, 0.1) 100%);
  border: 1px solid rgba(248, 113, 113, 0.3);
  color: #fca5a5;
}
.warning-text {
  flex: 1;
  font-weight: 500;
  line-height: 1.4;
}
.warning-refresh-btn:hover {
  background: rgba(59, 130, 246, 0.3);
  border-color: rgba(96, 165, 250, 0.6);
  transform: translateY(-1px);
}
.last-update-container.fresh {
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(74, 222, 128, 0.2);
}
.last-update-container.stale {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(248, 113, 113, 0.2);
}
.timestamp-text {
  font-weight: 600;
  color: #e1e8ed;
}

/* #dataStatus - ELIMINADO en v8.2, reemplazado por .connection-status */

.health-warning {
  font-size: 1.1em;
  cursor: help;
  filter: drop-shadow(0 0 2px #fbbf24);
}
.risk-indicator.risk-low {
  background: rgba(34, 197, 94, 0.15);
  color: #86efac;
  border: 1px solid rgba(74, 222, 128, 0.3);
}
.risk-indicator.risk-high {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
  border: 1px solid rgba(248, 113, 113, 0.3);
}

/* ==========================================
   MODALES MODERNIZADOS v6.0.0
   ========================================== */

/* ==========================================
   FASE 3: ANIMACIONES DE ENTRADA/SALIDA
   Modal Slide Mejorado
   ========================================== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(1, 4, 9, 0.85);
  backdrop-filter: blur(8px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-out);
}

.modal-overlay.active {
  opacity: 1;
}

.modal-content {
  background: var(--color-bg-secondary);
  border-radius: var(--radius-xl);
  border: 1px solid var(--color-border-default);
  box-shadow:
    var(--shadow-xl),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  max-width: 90%;
  max-height: 85%;
  width: 360px;
  overflow: hidden;
  opacity: 0;
  transform: scale(0.95) translateY(20px);
  transition:
    opacity var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-out);
}

.modal-overlay.active .modal-content {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--color-border-default);
  background: linear-gradient(135deg, var(--color-bg-tertiary) 0%, var(--color-bg-secondary) 100%);
  position: relative;
}

.modal-header::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--gradient-info);
}

.modal-header h2,
.modal-header h3 {
  margin: 0;
  color: var(--color-text-primary);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.modal-close,
.modal-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.modal-close:hover,
.modal-close-btn:hover {
  background: var(--color-danger-subtle);
  border-color: var(--color-danger);
  color: var(--color-danger);
  transform: rotate(90deg);
}
.modal-body {
  padding: var(--space-4);
  max-height: 450px;
  overflow-y: auto;
}

.modal-body::-webkit-scrollbar {
  width: 6px;
}

.modal-body::-webkit-scrollbar-track {
  background: var(--color-bg-primary);
}

.modal-body::-webkit-scrollbar-thumb {
  background: var(--color-border-emphasis);
  border-radius: var(--radius-full);
}
/* Filtros dentro de la modal */
.filter-group {
  margin-bottom: var(--space-5);
}
.filter-group-label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--space-2);
}
.filter-select {
  width: 100%;
  padding: var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  transition: all var(--duration-fast) var(--ease-default);
}

/* ============================================
  COMPONENTES DE RUTA (Reducido)
  Nota: estructura principal de cards definida en la sección de cards.
  ============================================ */

/* ============================================
   ESTADO SIN RUTAS
   ============================================ */
.no-routes {
  text-align: center;
  padding: 40px 20px;
  color: var(--color-text-secondary);
}
.no-routes-text {
  font-size: 16px;
  margin-bottom: 20px;
}
.toast {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  box-shadow: var(--shadow-lg);
  opacity: 0;
  transform: translateX(100%);
  animation: toastSlideIn var(--duration-normal) var(--ease-out) forwards;
}
@keyframes toastSlideIn {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes toastSlideOut {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}
.btn-reset-filters:hover {
  background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(107, 114, 128, 0.3);
}
/* panelSlideDown consolidado en slideDown */

.filters-panel-header {
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  padding: 12px 16px;
  border-bottom: 1px solid #475569;
}
.filters-panel-body {
  padding: 16px;
}

/* MODAL DE DETALLES DE RUTA - Scrollbar */
.modal-content::-webkit-scrollbar {
  width: 6px;
}

.modal-content::-webkit-scrollbar-track {
  background: rgba(59, 130, 246, 0.1);
  border-radius: 3px;
}

.modal-content::-webkit-scrollbar-thumb {
  background: rgba(59, 130, 246, 0.3);
  border-radius: 3px;
}

.modal-content::-webkit-scrollbar-thumb:hover {
  background: rgba(59, 130, 246, 0.5);
}
.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}
.card:hover {
  transform: var(--hover-lift);
  box-shadow: var(--shadow-card-hover);
  border-color: var(--border-hover);
}

.filter-input:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

/* Duplicados de filtros consolidados */

/* ============================================
   EXCHANGES LIST - Tarjetas de exchanges
   ============================================ */
.exchanges-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  padding: var(--space-2);
}

/* Exchange Card - Base (consistente con route-card) */
.exchange-card {
  position: relative;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  border-left: 3px solid var(--color-brand-primary);
  transition: all var(--duration-fast) var(--ease-out);
  cursor: pointer;
}

.exchange-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--color-border-emphasis);
  background: var(--card-bg-hover);
}

/* Variantes por tipo */
.exchange-card[data-type='oficial'] {
  border-left-color: var(--color-success);
}

.exchange-card[data-type='usdt_ars'] {
  border-left-color: var(--color-brand-primary);
}

.exchange-card[data-type='usdt_usd'] {
  border-left-color: var(--color-warning);
}

.exchange-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-3);
}

.exchange-name {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.exchange-type {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  background: var(--color-bg-tertiary);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
}

.exchange-rates {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.exchange-rate {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2);
  background: var(--color-bg-primary);
  border-radius: var(--radius-md);
}

.exchange-source {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  text-align: right;
  margin-top: var(--space-3);
  padding-top: var(--space-2);
  border-top: 1px solid var(--color-border-subtle);
}

/* Responsive para exchanges - Consolidado en @media (max-width: 768px) al final del archivo */

/* ============================================
   MEJORAS PARA BOTONES DE PASOS DE RUTAS
   Diseño más compacto y atractivo
   ============================================ */

.steps-simple {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  margin: var(--space-3) 0;
}
.step-simple::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--primary-blue) 0%, var(--primary-blue-light) 100%);
  border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
}
.step-simple[data-step='1']::before {
  background: linear-gradient(180deg, #10b981 0%, #059669 100%);
}
.step-simple[data-step='3']::before {
  background: linear-gradient(180deg, #3b82f6 0%, #1e3a8a 100%);
}
.step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, var(--primary-blue-dark) 0%, var(--primary-blue) 100%);
  color: var(--color-text-inverse);
  border-radius: 50%;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  flex-shrink: 0;
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
  position: relative;
  z-index: 1;
}
.step-simple[data-step='2'] .step-number {
  background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
}
.step-simple[data-step='4'] .step-number {
  background: linear-gradient(135deg, #6d28d9 0%, #8b5cf6 100%);
}
.step-simple-content h4 {
  margin: 0 0 var(--space-1) 0;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}
.step-simple-calc {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--space-1);
  margin: var(--space-1) 0;
  padding: var(--space-1);
  background: rgba(15, 23, 42, 0.4);
  border-radius: var(--border-radius-sm);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: var(--font-size-sm);
}
.step-simple-calc.final {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(109, 40, 217, 0.15) 100%);
  border: 1px solid rgba(139, 92, 246, 0.2);
}

.calc-arrow {
  color: var(--text-muted);
  font-size: var(--font-size-sm);
}
.calc-result.big {
  font-size: var(--font-size-lg);
  color: var(--success);
  font-weight: var(--font-weight-bold);
}
.step-simple-warning {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1);
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.2) 100%);
  border: 1px solid rgba(245, 158, 11, 0.3);
  border-radius: var(--border-radius-sm);
  font-size: var(--font-size-xs);
  color: #fbbf24;
  margin-top: var(--space-1);
}
/* Responsive para pasos - Consolidado en @media (max-width: 768px) al final del archivo */

/* @keyframes stepSlideIn - DEFINIDO EN SECCIÓN DE ANIMACIONES CONSOLIDADAS */

.step-simple {
  animation: stepSlideIn 0.3s ease-out;
}
.step-simple:nth-child(2) {
  animation-delay: 0.2s;
}
.step-simple:nth-child(4) {
  animation-delay: 0.4s;
}
/* ==========================================
   ESTILOS PARA TAB DE BANCOS (Sub-tabs)
   ========================================== */

/* Tabs de bancos (sub-tabs dentro de la pestaña Exchanges) */
/* Contenedor de contenido de tabs de bancos */
.banks-tab-content {
  display: none;
}

.banks-tab-content.active {
  display: block;
}

.banks-sort-controls {
  display: flex;
  gap: var(--space-2);
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-3);
  border: 1px solid var(--color-border-default);
  flex-wrap: wrap;
}

.sort-btn {
  flex: 1;
  min-width: 90px;
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  white-space: nowrap;
  text-align: center;
}

.sort-btn.active {
  background: var(--color-bg-tertiary);
  border-color: var(--color-brand-primary);
  color: var(--color-brand-primary);
  font-weight: var(--font-weight-semibold);
}
.banks-column-headers {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap: 12px;
  margin-bottom: 8px;
  padding: 8px 12px;
  background: rgba(15, 23, 42, 0.3);
  border-radius: 6px;
  border: 1px solid rgba(59, 130, 246, 0.1);
}
/* Grid de bancos */
.banks-section {
  margin-bottom: var(--space-6);
}
/* Grid de bancos */
.banks-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-1);
}

/* ==========================================
   📱 MEDIA QUERIES CONSOLIDADAS (max-width: 768px)
   ========================================== */
@media (max-width: 768px) {
  /* Variantes legacy de precios de bancos removidas */

  /* Exchanges */
  .exchanges-list {
    grid-template-columns: 1fr;
  }

  .filter-section {
    flex-direction: column;
    gap: var(--space-2);
  }

  .filter-buttons {
    justify-content: center;
  }
  .step-number {
    align-self: flex-start;
    margin-bottom: var(--space-1);
  }
  .calc-arrow {
    display: none;
  }
}
.detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: var(--space-3);
  border-bottom: 1px solid var(--color-border-default);
}
.detail-profit .profit-value {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
}
.detail-profit.negative .profit-value {
  color: var(--color-danger);
}
.detail-type .type-badge {
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-elevated);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}
.summary-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-2) 0;
}
.summary-row.highlight {
  background: var(--color-bg-elevated);
  margin: var(--space-2) calc(-1 * var(--space-3));
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
}
.summary-row .value {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
.summary-row .value.negative {
  color: var(--color-danger);
}
.step-item {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--color-border-subtle);
}

.step-item .step-content {
  flex: 1;
}
.step-item .step-desc {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  line-height: 1.4;
}
.fees-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}
.detail-rates {
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
}
.rate-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}
.rate-item .rate-value {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}
/* Variantes específicas de profit para crypto */
.crypto-route-card.profit-high::before {
  background: #3fb950;
  width: 4px;
}
/* Estado seleccionado específico para crypto */
.crypto-route-card.selected {
  border-color: var(--color-brand-primary);
  background: linear-gradient(135deg, rgba(88, 166, 255, 0.1) 0%, rgba(22, 27, 34, 0.9) 100%);
  box-shadow:
    0 0 0 2px rgba(88, 166, 255, 0.3),
    var(--shadow-lg);
}
/* Badge de profit */
.profit-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 0.9em;
}
.profit-badge.profit-negative {
  background: rgba(248, 81, 73, 0.15);
  color: #fca5a5;
  border: 1px solid rgba(248, 81, 73, 0.3);
}
.crypto-route-card .route-path {
  display: flex !important;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  font-size: 0.85em;
  color: #e6edf3;
}
.operation-badge {
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.7em;
  font-weight: 600;
  text-transform: uppercase;
}
.operation-badge.p2p {
  background: rgba(210, 153, 34, 0.15);
  color: #fbbf24;
}
.speed-indicator,
.difficulty-indicator {
  font-size: 0.75em;
  color: var(--color-text-secondary);
}
.crypto-route-card .profit-details .value {
  font-weight: 600;
  color: #3fb950;
  font-size: 0.85em;
}

/* Botón de detalle removido: tarjeta completa clickeable */

/* ==========================================
   FASE 6: JERARQUÍA VISUAL MEJORADA
   Sistema de Tipografía, Espaciado y Pesos Visuales
   ========================================== */

/* ==========================================
   SISTEMA DE TIPOGRAFÍA - Jerarquía Visual
   ========================================== */

/* Tipografías base y utilidades principales viven en design-system.css */

/* Texto del cuerpo - Pequeño */
.body-small {
  font-size: 12px;
  font-weight: 400;
  line-height: 1.4;
  color: var(--color-text-primary);
}

/* Texto con énfasis */
.text-emphasis {
  font-weight: 600;
  color: var(--color-text-primary);
}

/* Monospace para números/code */
.text-mono {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.9em;
}
/* Utilidades no usadas removidas durante limpieza de estilos */

/* ==========================================
   JERARQUÍA VISUAL APLICADA A COMPONENTES
   ========================================== */

/* Header con jerarquía visual mejorada */
header h1 {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: -0.02em;
}

header .subtitle {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
  margin-top: 2px;
}
.route-card .route-profit {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.01em;
}
.route-card .route-badges {
  display: flex;
  gap: var(--space-2);
  margin-top: var(--space-3);
}

/* ==========================================
   INDICADOR DE CONEXIÓN - Footer v8.2
   ========================================== */

.connection-status {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--color-text-muted);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-default);
  transition: all 0.3s ease;
}

.connection-status .status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-text-muted);
  transition: all 0.3s ease;
}

/* Estado: Online/Conectado */
.connection-status.online .status-dot {
  background: var(--color-success);
  box-shadow: 0 0 6px var(--color-success);
  animation: pulse-dot 2s ease-in-out infinite;
}

.connection-status.online {
  border-color: rgba(16, 185, 129, 0.3);
}

/* Estado: Datos antiguos (warning) */
.connection-status.stale .status-dot {
  background: var(--color-warning);
  box-shadow: 0 0 6px var(--color-warning);
}

.connection-status.stale {
  border-color: rgba(245, 158, 11, 0.3);
}

.connection-status.stale .status-time {
  color: var(--color-warning);
}

/* Estado: Offline/Error */
.connection-status.offline .status-dot {
  background: var(--color-danger);
  box-shadow: none;
}

.connection-status.offline {
  border-color: rgba(239, 68, 68, 0.3);
}

.connection-status.offline .status-time {
  color: var(--color-danger);
}

/* Animación del punto */
@keyframes pulse-dot {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.2);
  }
}

.connection-status .status-time {
  line-height: 1;
}

/* ==========================================
   MEJORAS DE CONTRASTE Y LEGIBILIDAD
   ========================================== */

/* Profit con mejor contraste */
.profit-positive {
  color: var(--color-success);
  font-weight: 700;
}

.profit-negative {
  color: var(--color-danger);
  font-weight: 700;
}

.badge-primary {
  background: var(--color-brand-primary);
  color: var(--color-text-inverse);
}

.badge-warning {
  background: var(--color-warning);
  color: var(--color-bg-primary);
}
/* ==========================================
   MODAL DE DETALLES CRYPTO v8.0
   Diseño profesional y claro
   ========================================== */

/* Header con profit destacado */
.crypto-symbol {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.symbol-icon {
  font-size: 1.5rem;
}

.symbol-name {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.profit-highlight {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.profit-highlight .profit-value {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
}

.crypto-detail-header.profitable .profit-value {
  color: var(--color-success);
}

.crypto-detail-header.loss .profit-value {
  color: var(--color-danger);
}

.profit-highlight .profit-label {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Visualización de ruta */
.route-visualization {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  padding: var(--space-4);
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-subtle);
}

.route-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  min-width: 100px;
}

.route-step .step-icon {
  font-size: 1.25rem;
}

.route-step .step-exchange {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
}

.route-step .step-action {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
}

.route-step.buy {
  border: 1px solid rgba(88, 166, 255, 0.3);
}

.route-step.sell {
  border: 1px solid rgba(63, 185, 80, 0.3);
}

.route-arrow {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.route-arrow .arrow-icon {
  font-size: 1.25rem;
  color: var(--color-brand-primary);
}

.route-arrow .arrow-label {
  font-size: 0.65rem;
  color: var(--color-text-muted);
  text-transform: uppercase;
}

/* Badges de info */
.info-badges {
  display: flex;
  justify-content: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

/* Desglose de operación */
.operation-breakdown {
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-default);
  overflow: hidden;
}

.breakdown-title {
  padding: var(--space-3) var(--space-4);
  margin: 0;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  background: var(--color-bg-tertiary);
  border-bottom: 1px solid var(--color-border-default);
}

.breakdown-section {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--color-border-subtle);
}

.section-header {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-brand-primary);
  margin-bottom: var(--space-2);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.breakdown-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-1-5) 0;
  font-size: var(--font-size-sm);
}

.breakdown-row .label {
  color: var(--color-text-secondary);
}

.breakdown-row .value {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  font-family: var(--font-mono);
}

.breakdown-row .value.negative {
  color: var(--color-danger);
}

.breakdown-row .value.muted {
  color: var(--color-text-muted);
  font-weight: var(--font-weight-normal);
}

.breakdown-row.highlight {
  background: var(--color-bg-tertiary);
  margin: var(--space-1) calc(-1 * var(--space-4));
  padding: var(--space-2) var(--space-4);
}

.breakdown-row.fee {
  opacity: 0.8;
}

/* Resumen final */
.final-summary {
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-default);
}

.final-summary.profitable {
  border-color: rgba(63, 185, 80, 0.3);
}

.final-summary.loss {
  border-color: rgba(248, 81, 73, 0.3);
}

.final-summary .summary-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-1-5) 0;
  font-size: var(--font-size-sm);
}

.final-summary .summary-row .label {
  color: var(--color-text-secondary);
}

.final-summary .summary-row .value {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.summary-divider {
  height: 1px;
  background: var(--color-border-default);
  margin: var(--space-2) 0;
}

.final-summary .summary-row.result {
  padding-top: var(--space-2);
}

.final-summary .summary-row.result .label {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.final-summary .summary-row.result .value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
}

.final-summary .summary-row.result .value.profit {
  color: var(--color-success);
}

.final-summary .summary-row.result .value.loss {
  color: var(--color-danger);
}

/* Detalles de fees colapsable */
.fees-details {
  border: 1px solid var(--color-border-subtle);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.fees-details summary {
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  cursor: pointer;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  transition: all var(--duration-fast) var(--ease-out);
  list-style: none;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.fees-details summary::-webkit-details-marker {
  display: none;
}

.fees-details summary::after {
  content: '▶';
  margin-left: auto;
  font-size: 0.7em;
  transition: transform var(--duration-fast) var(--ease-out);
}

.fees-details[open] summary::after {
  transform: rotate(90deg);
}

.fees-details summary:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
}

.fees-content {
  padding: var(--space-3);
  background: var(--color-bg-primary);
}

.fee-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-1-5) 0;
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  border-bottom: 1px solid var(--color-border-subtle);
}

.fee-row.total {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  padding-top: var(--space-2);
  margin-top: var(--space-2);
  border-top: 1px solid var(--color-border-default);
  border-bottom: none;
}
